import{b as t}from"./tslib.es6-CTwnr_FB.js";var e=function(){function t(){this.context={}}return t.prototype.process=function(t,e){var o=[];if(t instanceof HTMLLinkElement&&"stylesheet"===t.getAttribute("rel")||t instanceof HTMLStyleElement){var s=t.getAttribute("s-ophistry")||t.getAttribute("href")||n(t.textContent||"");if(this.context.hasOwnProperty(s)&&!e)o.push(this.context[s]);else{var i,c=void 0;this.context.hasOwnProperty(s)?(c=this.context[s],i=c.css):(t instanceof HTMLLinkElement?(i=new CSSStyleSheet,fetch(t.getAttribute("href")).then((function(t){return t.text()})).then((function(t){return i.replaceSync(t)}))):t instanceof HTMLStyleElement&&(i=t.sheet),c=new r(i),this.context[s]=c),o.push(c)}}else for(var h=t.children[0],l=void 0;h;)l=h.nextElementSibling,o.push.apply(o,this.process(h,e)),(h instanceof HTMLStyleElement||t instanceof HTMLLinkElement&&"stylesheet"===t.getAttribute("rel"))&&t.removeChild(h),h=l;return o},t.prototype.import=function(t,e){if(this.context.hasOwnProperty(t)&&!e)return this.context[t];var n=new CSSStyleSheet,o=new r(n);return this.context[t]=o,fetch(t).then((function(t){return t.text()})).then((function(t){return n.replaceSync(t)})),o},t.prototype.set=function(t,e){if(this.context.hasOwnProperty(t))this.context[t].css.replaceSync(e);else{var n=document.createElement("style");n.innerText=e,this.context[t]=new r(n)}return this.context[t]},t}(),n=function(t){for(var e=0,n=0,r=t.length;n<r;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e},r=function(){function e(t){this.css=t}return e.prototype.style=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var o=0,s=n;o<s.length;o++){var i=s[o];(null===(e=i.adoptedStyleSheets)||void 0===e?void 0:e.includes(this.css))||(i.adoptedStyleSheets=t(t([],i.adoptedStyleSheets||[],!0),[this.css],!1))}},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var o=r[n];o.adoptedStyleSheets.includes(this.css)&&o.adoptedStyleSheets.splice(o.adoptedStyleSheets.indexOf(this.css))}},e}();function o(t){return new r(t)}export{e as Sophistry,r as SophistryStyleSheet,o as wrap};
