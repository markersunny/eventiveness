"use strict";var t=require("./tslib.es6-OarTx95B.js"),e=function(){function t(){this.context={}}return t.prototype.process=function(t,e){var s=[];if(t instanceof HTMLLinkElement&&"stylesheet"===t.getAttribute("rel")||t instanceof HTMLStyleElement){var o=t.getAttribute("s-ophistry")||t.getAttribute("href")||n(t.textContent||"");if(this.context.hasOwnProperty(o)&&!e)s.push(this.context[o]);else{var i,c=void 0;this.context.hasOwnProperty(o)?(c=this.context[o],i=c.css):(t instanceof HTMLLinkElement?(i=new CSSStyleSheet,fetch(t.getAttribute("href")).then((function(t){return t.text()})).then((function(t){return i.replaceSync(t)}))):t instanceof HTMLStyleElement&&(i=t.sheet),c=new r(i),this.context[o]=c),s.push(c)}}else for(var h=t.children[0],l=void 0;h;)l=h.nextElementSibling,s.push.apply(s,this.process(h,e)),(h instanceof HTMLStyleElement||t instanceof HTMLLinkElement&&"stylesheet"===t.getAttribute("rel"))&&t.removeChild(h),h=l;return s},t.prototype.import=function(t,e){if(this.context.hasOwnProperty(t)&&!e)return this.context[t];var n=new CSSStyleSheet,s=new r(n);return this.context[t]=s,fetch(t).then((function(t){return t.text()})).then((function(t){return n.replaceSync(t)})),s},t.prototype.set=function(t,e){if(this.context.hasOwnProperty(t))this.context[t].css.replaceSync(e);else{var n=document.createElement("style");n.innerText=e,this.context[t]=new r(n)}return this.context[t]},t}(),n=function(t){for(var e=0,n=0,r=t.length;n<r;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e},r=function(){function e(t){this.css=t}return e.prototype.style=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var s=0,o=n;s<o.length;s++){var i=o[s];(null===(e=i.adoptedStyleSheets)||void 0===e?void 0:e.includes(this.css))||(i.adoptedStyleSheets=t.__spreadArray(t.__spreadArray([],i.adoptedStyleSheets||[],!0),[this.css],!1))}},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var s=r[n];s.adoptedStyleSheets.includes(this.css)&&s.adoptedStyleSheets.splice(s.adoptedStyleSheets.indexOf(this.css))}},e}();exports.Sophistry=e,exports.SophistryStyleSheet=r,exports.wrap=function(t){return new r(t)};
